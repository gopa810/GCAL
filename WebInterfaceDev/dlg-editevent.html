<html>
<head>
<title></title>
<script type="text/javascript" src="{%homedir}/shh.js"></script>
<link rel="stylesheet" type="text/css" href="{%homedir}/{%current_theme}">
<script type="text/javascript">
function onSave()
{
	//var el = document.getElementById("textField0");
	saveString("eventtitle", getElementValue("fldTitle"));
	saveString("eventtype", getElementValue("fldEventType"));
	saveString("eventtithi", getElementValue("fldTithi"));
	saveString("eventmasa", getElementValue("fldMasa"));
	saveString("eventsankranti", getElementValue("fldSankranti"));
	saveString("eventoffset1", getElementValue("fldOffset1"));
	saveString("eventeventref", getElementValue("fldEventRef"));
	saveString("eventoffset2", getElementValue("fldOffset2"));
	saveString("eventfastsubject", getElementValue("fldFastSubject"));
	saveString("eventfasttype", getElementValue("fldFastType"));
	saveString("eventclass", getElementValue("fldEventClass"));
	saveString("eventsinceyear", getElementValue("fldSinceYear"));
	saveString("eventvisibility", getElementValue("fldVisibility"));
}

function onLoad()
{
	setElementValue("fldTitle", loadString("eventtitle"));
	setElementValue("fldEventType", Number(loadString("eventtype")));
	setElementValue("fldTithi", Number(loadString("eventtithi")));
	setElementValue("fldMasa", Number(loadString("eventmasa")));
	setElementValue("fldSankranti", Number(loadString("eventsankranti")));
	setElementValue("fldOffset1", Number(loadString("eventoffset1")));
	setElementValue("fldEventRef", Number(loadString("eventeventref")));
	setElementValue("fldOffset2", Number(loadString("eventoffset2")));
	setElementValue("fldFastSubject", loadString("eventfastsubject"));
	setElementValue("fldFastType", Number(loadString("eventfasttype")));
	setElementValue("fldEventClass", Number(loadString("eventclass")));
	setElementValue("fldSinceYear", Number(loadString("eventsinceyear")));
	setElementValue("fldVisibility", Number(loadString("eventvisibility")));
}

function onTypeChange()
{
    var el = document.getElementById('fldEventType').value;
	if (el == 0)
	{
	    document.getElementById('specTithi').style.display = 'block';
	    document.getElementById('specSank').style.display = 'none';
	    document.getElementById('specRef').style.display = 'none';
	}
	if (el == 1)
	{
	    document.getElementById('specTithi').style.display = 'none';
	    document.getElementById('specSank').style.display = 'block';
	    document.getElementById('specRef').style.display = 'none';
	}
	if (el == 2)
	{
	    document.getElementById('specTithi').style.display = 'none';
	    document.getElementById('specSank').style.display = 'none';
	    document.getElementById('specRef').style.display = 'block';
	}
}

</script>
</head>

<body>

<h1>{%title 0}</h1>

<h2>Event Title</h2>
<p width=50%>Enter title for event (mandatory)</p>
<p><input type="text" id="fldTitle" value="">

<h2>Event Type</h2>
<select onchange='onTypeChange();' id='fldEventType'>
  <option value='0'>Based on Tithi</option>
  <option value='1'>Based on Sankranti</option>
  <option value='2'>Based on other Event</option>
</select>

<div id='specTithi'>
<h2>Tithi</h2>
<select id='fldTithi'>
<script>
  for(i= 0; i < 30; i++)
  {
     document.write("<option value='" + i + "'>");
	 document.write(scriptObject.getTithiName(i));
	 document.write("</option>");
  }
</script>
</select>

<h2>Masa</h2>
<select id='fldMasa'>
<script>
  for(i= 0; i < 12; i++)
  {
     document.write("<option value='" + i + "'>");
	 document.write(scriptObject.getMasaName(i));
	 document.write("</option>");
  }
</script>
</select>

</div>

<div id='specSank'>
<h2>Sankranti</h2>
<select id='fldSankranti'>
<script>
  for(i= 0; i < 12; i++)
  {
     document.write("<option value='" + i + "'>");
	 document.write(scriptObject.getSankrantiName(i));
	 document.write("</option>");
  }
</script>
</select>

<h2>Offset</h2>
<select id='fldOffset1'>
<script>
  for(i= -4; i < 5; i++)
  {
     document.write("<option value='" + i + "'>");
	 document.write(i.toString() + " days");
	 document.write("</option>");
  }
</script>
</select>


</div>

<div id='specRef'>
<h2>Event</h2>
<select id='fldEventRef'>
<script>
var events = scriptObject.getSpecEventsList();
var list = events.split('<line>');
var line = [];

  for(i= 0; i < list.length; i++)
  {
     line = list[i].split('<r>');
	 if (line.length == 2)
	 {
		 document.write("<option value='" + line[0] + "'>");
		 document.write(line[1]);
		 document.write("</option>");
	 }
  }
</script>
</select>

<h2>Offset</h2>
<select id='fldOffset2'>
<script>
  for(i= -4; i < 5; i++)
  {
     document.write("<option value='" + i + "'>");
	 document.write(i.toString() + " days");
	 document.write("</option>");
  }
</script>
</select>

</div>

<h2>Fast Subject</h2>
<p>The name of person or subject this event is relevant for.
<p><input type="text" id="fldFastSubject">

<h2>Fast Type</h2>
<select id='fldFastType'>
  <option id='0'>None</option>
<script>
  
  for(i = 1; i < 7; i++)
  {
     document.write('<option value=\'' + i + '\'>');
	 document.write(scriptObject.getFastName(i));
	 document.write('</option>');
  }
</script>
</select>

<h2>Event class</h2>
<select id='fldEventClass'>
<script>
  for(i = 0; i < 7; i++)
  {
     document.write('<option value=\'' + i + '\'>');
	 document.write(scriptObject.getEventClassName(i));
	 document.write('</option>');
  }
</script>
</select>

<h2>Since the year...</h2>
<p>Gregorian year of the first occurence of this event. Put here -10000 if you want to disable the calculation of anniversary.
<p><input type="number" id="fldSinceYear">

<h2>Visibility</h2>
<p>Select <b>visible</b> if this event should be visible in calendar results.
<select id='fldVisibility'>
  <option value='0'>Not visible</option>
  <option value='1'>Visible</option>
</select>



<script type="text/javascript">
onTypeChange();
onLoad();

writeNavigStart();
writeNavigItem("Main Menu", "window.location.href=\"mainmenu.html\"");
writeNavigItem("{%string leftArrow} {%title -1}", "goBack()");
writeNavigItem("{%title +1} {%string rightArrow}", "onSave();goNext()");
writeNavigEnd();

if (scriptObject.getInt('disableventtype') == 1)
{
   document.getElementById('fldEventType').disabled = 1;
}

</script>


</body>
</html>